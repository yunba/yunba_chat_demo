云巴聊天室 DEMO
====  
云巴聊天室演示, 支持文本, 语音消息, 和文件传输(依赖文件储存服务)

## 说明  
`server` 目录为文件储存服务代码, 本例子使用 `Node.js` + `expressjs` 搭建了一个简单的文件服务, 客户端使用 `vuejs`.
本例子仅供演示, 请不要用在生产中.  

请使用现代浏览器查看演示.

## 原理  
文本消息直接通过云巴实时通讯服务发送, 语音/文件先上传到文件储存服务得到一个 url, 然后再通过云巴实时通讯服务把 url 发出去.  

另外, 如果你使用本例子的代码, 只能在本地正常使用语音/文件消息, 因为文件上传到本地, 其他人访问不到, 如果你想要别人能看到, 你需要使用其他文件储存服务.

## 开始  
开启本地文件储存服务
```js
// node >= 4.x
cd server
npm install
node server.js  
```
双击 `index.html` 用浏览器打开该文件  


## 预览  
[点击查看预览](https://yunba.github.io/yunba_chatroom_demo/index.html), 本预由于缺少文件储存服务, 所以语音/文件消息不能正常工作.

## 已知 bug  
Firefox 下 关闭/刷新页面的时候 `onbeforeunload` 可能没有正确工作, 导致其他用户不知道该用户离开聊天室  